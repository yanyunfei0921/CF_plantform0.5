<!DOCTYPE html>
<html>
    <head>
        <title>Optical Axis Test System</title>
        <!-- 添加必要配置 -->
        <script type="text/javascript" src="/static/libs/jszip.min.js"></script>
        <script type="text/javascript" src="/static/libs/FileSaver.min.js"></script>
        <script type="text/javascript" src="/static/libs/vue.js"></script>
        <script type="text/javascript" src="/static/libs/axios.js"></script>
        <script type="text/javascript" src="/static/libs/echarts-5.3.1/dist/echarts.js"></script>
        <script type="text/javascript" src="/static/libs/elementui/lib-master/index.js"></script>
        <script type="text/javascript" src="/static/libs/jszip.min.js"></script>
        <script type="text/javascript" src="/static/libs/FileSaver.min.js"></script>
        <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
        <link rel="stylesheet" href="/static/libs/elementui/lib-master/theme-chalk/index.css">
    </head>
    <body>
        <div id="app">
            <el-container class="el-all-container">
                <el-header>
                    Header
                </el-header>
                <el-container class="el-main-container">
                    <el-aside>
                        <el-menu
                        default-active="1"
                        background-color="#D3DCE6"
                        text-color="#333"
                        @select="handleSelect">
                        <el-submenu index="1">
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>首页</span>
                            </template>
                            <el-menu-item index="1-1">使用说明</el-menu-item>
                            <el-menu-item index="1-2">注意事项</el-menu-item>
                        </el-submenu>
                        <el-submenu index="2">
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>接口配置</span>
                            </template>
                            <el-menu-item index="2-1">接口配置</el-menu-item>
                        </el-submenu>
                        <el-submenu index="3">
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>光轴一致性测试</span>
                            </template>
                            <el-menu-item index="3-1">选项1</el-menu-item>
                            <el-menu-item index="3-2">选项2</el-menu-item>
                        </el-submenu>
                        <el-submenu index='4'>
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>动态目标模拟</span>
                            </template>
                            <el-menu-item index="4-1">选项1</el-menu-item>
                            <el-menu-item index="4-2">选项2</el-menu-item>
                        </el-submenu>
                        <el-submenu index='5'>
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>激光模拟测距</span>
                            </template>
                            <el-menu-item index="5-1">选项1</el-menu-item>
                            <el-menu-item index="5-2">选项2</el-menu-item>
                        </el-submenu>
                        <el-submenu index='6'>
                            <template slot="title">
                                <i class="el-icon-folder"></i>
                                <span>激光能力测试</span>
                            </template>
                            <el-menu-item index="6-1">选项1</el-menu-item>
                            <el-menu-item index="6-2">选项2</el-menu-item>
                        </el-submenu>
                    </el-menu>
                    </el-aside>
                    <el-main>
                        <div class="main-header">
                            <el-breadcrumb separator="/">
                                <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
                                <el-breadcrumb-item v-if="activeMenu">{{ activeMenu }}</el-breadcrumb-item>
                            </el-breadcrumb>
                            <!-- 添加设备状态栏 -->
                            <div class="device-status-bar">
                                <el-row :gutter="20">
                                    <el-col :span="4" v-for="(status, device) in deviceStatus" :key="device">
                                        <el-tag
                                            :type="status ? 'success' : 'danger'"
                                            size="small"
                                            class="device-status-tag">
                                            {{ device }}: {{ status ? '已连接' : '未连接' }}
                                        </el-tag>
                                    </el-col>
                                </el-row>
                            </div>
                            <el-divider></el-divider>
                        </div>
                        <div class="main-content-wrapper">
                            <keep-alive>
                                <component :is="currentComponent"></component>
                            </keep-alive>
                        </div>
                    </el-main>
                </el-container>
                <el-footer class="el-fixed-footer">
                    Footer
                </el-footer>
            </el-container>
        </div>
<!-- 主界面逻辑 -->
        <script src="/static/js/main.js"></script>
<!-- 界面样式 -->
        <style>
            /* -------------------------------主界面样式-------------------------------- */

            /* 整体容器设置 */
            .el-all-container {
                height: 100vh; /* 使用固定高度而不是最小高度 */
                display: flex;
                flex-direction: column;
                overflow: hidden; /* 防止整体滚动 */
            }

            /* Header 样式 */
            .el-header {
                background: #B3C0D1;
                color: #333;
                line-height: 60px;
                height: 60px !important;
                flex-shrink: 0; /* 防止header压缩 */
            }

            /* 中间区域容器 */
            .el-main-container {
                flex: 1;
                display: flex;
                min-height: 0; /* 重要：允许内部元素正确滚动 */
            }

            /* 侧边栏 */
            .el-aside {
                width: 200px !important;
                background: #D3DCE6;
                overflow-y: hidden; /* 侧边栏不滚动 */
                flex-shrink: 0; /* 防止侧边栏压缩 */
            }

            /* 主内容区 */
            .el-main {
                flex: 1;
                padding: 0;  /* 移除内边距 */
                background: #fff;
                display: flex;
                flex-direction: column;
                overflow: hidden;  /* 防止整体滚动 */
            }

            /* 面包屑区域样式 */
            .main-header {
                padding: 20px 20px 0 20px;
                flex-shrink: 0;
                background-color: #fff;
            }

            /* 组件内容区域样式 */
            .main-content-wrapper {
                flex: 1;
                overflow-y: auto;  /* 只有内容区域滚动 */
                padding: 0 20px 20px 20px;
            }

            /* 美化内容区滚动条 */
            .main-content-wrapper::-webkit-scrollbar {
                width: 6px;
            }

            .main-content-wrapper::-webkit-scrollbar-thumb {
                background-color: #909399;
                border-radius: 3px;
            }

            .main-content-wrapper::-webkit-scrollbar-track {
                background-color: #f5f7fa;
            }

            /* 底部固定 */
            .el-fixed-footer {
                background: #B3C0D1;
                color: #333;
                line-height: 60px;
                height: 60px !important;
                flex-shrink: 0; /* 防止footer压缩 */
                box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            }

            /* 基础样式重置 */
            body {
                margin: 0;
                height: 100vh;
                overflow: hidden; /* 防止body滚动 */
            }

            html {
                height: 100%;
                overflow: hidden; /* 防止html滚动 */
            }
            /* -------------------------------光轴测试界面样式-------------------------------- */
            .main-content{
                margin-top: 20px;
            }
            .el-button-next{
                float: right;
                margin-left: 20px;
            }
            .el-button-previous{
                float: right;
            }
            .step-content{
                margin-top: 60px;
            }
            .camera-view {
                width: 100%;
                margin-bottom: 20px;
            }
            .image-container {
                width: 100%;
                height: 300px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #f5f7fa;
                overflow: hidden;
            }
            .image-container img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }
            .no-signal {
                color: #909399;
                font-size: 20px;
            }
            /* 欢迎界面样式 */
            .welcome-container {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 500px;
                padding: 20px;
            }

            .welcome-card {
                width: 800px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
            }

            .welcome-header {
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                color: #409EFF;
            }

            .welcome-header i {
                margin-right: 8px;
                font-size: 24px;
            }

            .welcome-content {
                text-align: center;
                padding: 30px;
            }

            .warning-icon {
                font-size: 60px;
                color: #E6A23C;
                margin-bottom: 30px;
            }

            .welcome-content h2 {
                font-size: 28px;
                color: #303133;
                margin-bottom: 30px;
            }

            .check-list {
                list-style: none;
                padding: 0;
                margin: 30px auto;
                max-width: 500px;
            }

            .check-list li {
                margin: 20px 0;
                color: #303133;
                font-size: 22px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .check-list li i {
                color: #67C23A;
                margin-right: 15px;
                font-size: 24px;
            }

            .divider {
                height: 2px;
                background: #EBEEF5;
                margin: 30px auto;
                width: 80%;
            }

            .note {
                color: #409EFF;
                font-size: 24px;
                margin: 20px 0 0 0;
            }

            /* ----------------------------粗调对准界面---------------------------- */
            /* 卡片容器样式 */
            .cards-container {
                display: flex;
                flex-direction: row;
                gap: 20px;
                margin-bottom: 20px;
                align-items: stretch;
                height: 700px; /* 设置固定总高度 */
            }

            /* 列容器样式 */
            .column-container {
                display: flex;
                flex-direction: column;
                gap: 20px;
                flex: 2;
                min-width: 250px;
            }

            /* 上方卡片自适应内容高度 */
            .column-container .el-card:first-child {
                height: auto !important; /* 覆盖原有固定高度 */
            }

            /* 下方卡片填充剩余空间 */
            .column-container .el-card:last-child {
                flex: 1; /* 占用剩余空间 */
                overflow: auto; /* 内容过多时可滚动 */
            }

            /* 中间和右侧卡片样式 */
            .cards-container > .el-card:nth-child(2) {
                flex: 6;
                min-width: 500px;
                height: 100%; /* 占满容器高度 */
            }

            .cards-container > .el-card:nth-child(3) {
                flex: 2;
                min-width: 250px;
                height: 100%; /* 占满容器高度 */
            }

            /* 所有卡片的内容区域样式 */
            .el-card__body {
                flex: 1;
                overflow: auto;
            }

            /* 修改单选框样式 */
            .algorithm-radio-group {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;  /* 使用全部可用高度 */
                padding: 10px 0;  /* 减小上下内边距 */
            }
            /* 调整左侧卡片的内边距 */
            .column-container .el-card__body {
                padding: 10px !important;  /* 减小内边距，使用 !important 覆盖默认样式 */
            }
            /* 调整单选框样式 */
            .algorithm-radio-group .el-radio.is-bordered {
                width: 90%;  /* 统一宽度 */
                height: 40px;  /* 统一高度 */
                margin: 5px 0;
                padding: 0 15px;
                box-sizing: border-box;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* 确保行居中 */
            .algorithm-radio-group .el-row {
                width: 100%;
                display: flex;
                justify-content: center;
                margin-bottom: 10px;
            }

            /* 确保列居中 */
            .algorithm-radio-group .el-col {
                display: flex;
                justify-content: center;
            }

            .el-alert__title {
                font-size: 16px;
                font-weight: bold;
            }

            .el-alert__description {
                font-size: 14px;
                margin: 8px 0;
                line-height: 1.6;
            }

            .tips-content {
                font-size: 14px;
            }

            .tips-content h4 {
                margin-top: 15px;
                margin-bottom: 10px;
                color: #409EFF;
            }

            .tips-content ul {
                padding-left: 20px;
            }

            .tips-content li {
                margin-bottom: 8px;
            }
            /* 质心检测结果显示样式 */


            /* 差值显示样式 */
            .positive-diff {
                color: #F56C6C;  /* 红色 - 正偏差 */
                font-weight: bold;
            }

            .negative-diff {
                color: #409EFF;  /* 蓝色 - 负偏差 */
                font-weight: bold;
            }
            /* 指示激光调节样式 */
            .power-control-container {
                margin-top: 10px;
            }

            .power-title {
                font-size: 14px;
                color: #606266;
                margin-bottom: 10px;
            }

            .power-control {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            /* 基准光轴选择样式 */
            .el-radio-group {
                margin: 10px 0;
            }

            .el-radio-button__inner {
                padding: 8px 15px;
                font-size: 14px;
            }

            /* 靶标选择样式 */
            
            .target-radio-group {
                width: 100%;
            }

            .target-option {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 10px;
                border: 1px solid #EBEEF5;
                border-radius: 4px;
                transition: all 0.3s;
                cursor: pointer;
            }

            .target-option:hover {
                box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
            }

            .target-image {
                width: 100%;
                height: 120px;
                margin-bottom: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .target-image img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }

            /* 选中状态突出显示 */
            .el-radio__input.is-checked + .el-radio__label + .target-option,
            .el-radio__input.is-checked + .target-option {
                border-color: #409EFF;
                background-color: rgba(64, 158, 255, 0.1);
            }

            /* -------------------------------接口配置界面样式-------------------------------- */
            .margin-top{
                margin-top: 20px;
            }
            /* 设备状态栏样式 */
            .device-status-bar {
                margin: 15px 0;
                padding: 10px 0;
                background-color: #f8f9fa;
                border-radius: 4px;
            }

            .device-status-tag {
                width: 100%;
                text-align: center;
                margin: 2px 0;
            }
        </style>
    </body>
</html>
